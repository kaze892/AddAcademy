<!DOCTYPE html>
<html>


<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#333">
    <title>第17章　ファイルを管理する</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" href="../assets/css/style.light-blue-500.min.css">
    <link rel="shortcut icon" href="../assets/img/demo/home_icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../assets/css/preload.min.css">
    <link rel="stylesheet" href="../assets/css/plugins.min.css">
    <script src="../../cdn.jsdelivr.net/npm/showdown%401.9.0/dist/showdown.min.js"></script>
    <script src="../assets/js/showdown-prettify.min.js"></script>
    <script src="../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <style>
        li.L0, li.L1, li.L2, li.L3,
        li.L5, li.L6, li.L7, li.L8 {
          list-style-type: decimal !important;
        }
    </style>
</head>

<body style="font-size:1.5rem;">
    <script type="text/javascript" src="header.html"></script>
    <div class="ms-hero-page ms-hero-img-headbg ms-hero-bg-primary mb-6">
        <div class="container">
            <a style="position:absolute; top:0px; left:auto;" href="../main-index.html"><img style="height: 60px;"src="../assets/img/demo/home_icon.png" alt=""></a>
            <div class="text-center">
                <br>
                <br>
                <h1 class="no-m ms-site-title color-white center-block ms-site-title-lg mt-2 animated zoomInDown animation-delay-5" style="margin-top:2rem!important;">第17章　ファイルを管理する</h1>
                <p class="lead lead-lg color-white text-center center-block mt-2 mb-4 mw-800 text-uppercase fw-300 animated fadeInUp animation-delay-7" style="margin-top:2rem!important; margin-bottom:4rem!important;">
                    ファイルを管理するに関する基本的な考え方について説明します
                </p>
                <a style="margin-top:2rem; font-size:1.3rem;" href="../main-index.html" class="btn btn-raised btn-warning animated fadeInUp animation-delay-10">homepage</a>
                
            </div>
        </div>
    </div>
    <div style="margin: 0 auto; max-width: 1024px;">
        <textarea id="text" style="display:none"># **ファイルを管理する**

***

Javaではファイルを扱うにはFileクラスを使います。

## **1.Fileクラス**

取り扱いたいファイルに対して1つのFileクラスのオブジェクトを対応させます。どのファイルを対象としているかを特定するには、ファイルが置いてある場所(ディレクトリ)とファイルの名前が必要になります。まずは絶対パスでファイル名を指定してみましょう。

```
File オブジェクト名 = new File(ファイル名);
```

対象とするファイル名をディレクトリの位置＋ファイル名の形で指定します。例えば下記のようになります。

```
File file = new File(&quot;C:\\Test\\test.txt&quot;);
```
&gt;注意：ファイル名を指定する時に、「C:¥Test¥test.txt」ではなく「C:¥¥Test¥¥test.txt」のように「¥」を2つ重ねて記述します。これは文字列の中で「¥」は特別な意味を持つ単語のため、特別な意味ではなく単なる「¥」ですということを意味するため「¥」を2つ重ねて「¥¥」と記述します。

下記のサンプルでは「Cドライブ」のルートディレクトリ(つまりC:¥のことです)に含まれるファイルやディレクトリ一覧を取得しています。(listメソッドの使い方は次のページ以降で詳しく見てみます)。

#### **・import**
import文は､他のパッケージ内のクラスやインターフェイスを参照するために利用する｡
ただし､上記は必須ではない｡

```
import パッケージ名.クラス名;

import java.util.Calendar;
import java.util.*
```

#### **例**
[JSample17_1.java]

```
package JFile;

import java.io.File;

public class JSample17_1 {

	public static void main(String args[]) {
		File cdirectory = new File(&quot;C:\\&quot;);

		String filelist[] = cdirectory.list();
		for (int i = 0; i &lt; filelist.length; i++) {
			System.out.println(filelist[i]);
		}
	}
}
```
#### **実行結果**(ローカルの環境によって、結果が違います。)
$Recycle.Bin&lt;br&gt;
Documents and Settings&lt;br&gt;
Drivers&lt;br&gt;
hiberfil.sys&lt;br&gt;
inetpub&lt;br&gt;
Intel&lt;br&gt;
pagefile.sys&lt;br&gt;
PerfLogs&lt;br&gt;
Program Files&lt;br&gt;
Program Files (x86)&lt;br&gt;
ProgramData&lt;br&gt;
Recovery&lt;br&gt;
swapfile.sys&lt;br&gt;
System Volume Information&lt;br&gt;
Test&lt;br&gt;
Users&lt;br&gt;
Windows

&lt;br&gt;

## **2.ファイルかディレクトリかの判別**

#### **例**
[JSample17_2.java]
```
package JFile;

import java.io.File;

public class JSample17_2 {
	public static void main(String args[]) {
		File cdirectory = new File(&quot;C:\\&quot;);
		File filelist[] = cdirectory.listFiles();
		for (int i = 0; i &lt; filelist.length; i++) {
			if (filelist[i].isFile()) {
				System.out.println(&quot;[F]&quot; + filelist[i].getName());
			} else if (filelist[i].isDirectory()) {
				System.out.println(&quot;[D]&quot; + filelist[i].getName());
			} else {
				System.out.println(&quot;[?]&quot; + filelist[i].getName());
			}
		}
	}
}
```
#### **実行結果**(ローカルの環境によって、結果が違います。)
[D]$Recycle.Bin&lt;br&gt;
[D]Documents and Settings&lt;br&gt;
[D]Drivers&lt;br&gt;
[F]hiberfil.sys&lt;br&gt;
[D]inetpub&lt;br&gt;
[D]Intel&lt;br&gt;
[F]pagefile.sys&lt;br&gt;
[D]PerfLogs&lt;br&gt;
[D]Program Files&lt;br&gt;
[D]Program Files (x86)&lt;br&gt;
[D]ProgramData&lt;br&gt;
[D]Recovery&lt;br&gt;
[F]swapfile.sys&lt;br&gt;
[D]System Volume Information&lt;br&gt;
[D]Test&lt;br&gt;
[D]Users&lt;br&gt;
[D]Windows&lt;br&gt;


&lt;br&gt;

## **3.ファイルのパスの取得**

Fileクラスで用意されている&quot;getAbsolutePath&quot;メソッドは絶対パスによるファイルの位置と名前を取得できます。

```
public String getAbsolutePath()
```

では簡単なサンプルで試してみます。「C:¥Test」ディレクトリに「test.txt」という名前のファイルを用意します。そしてJavaのサンプルプログラムも同じディレクトリに設置し、相対パスで指定した「test.txt」からFileクラスのオブジェクトを作成し、絶対パスでの位置と名前を取得してみましょう。

#### **例**
[JSample17_3.java]

```
package JFile;

import java.io.File;

public class JSample17_3{
    public static void main(String args[]){
        File file = new File(&quot;test.txt&quot;);
        String path = file.getAbsolutePath();
    System.out.println(&quot;File：&quot; + path);
    }
}
```

#### **実行結果**(ローカルの環境によって、結果が違います。)
File：C:\pleiades\workspace\MyClass\test.txt


## **4.ファイルを作成する**
ファイルを作成するには、FileクラスのcreateNewFileメソッドを使用します。

createNewFileメソッドは、boolean型の値を返します。
```
public boolean createNewFile() throws IOException
```

以下にcreateNewFileメソッドを使用した、ファイルの作成方法を記述します。

#### **例**
[JSample17_4.java]

```
package JFile;

import java.io.File;
import java.io.IOException;

public class JSample17_4 {
	public static void main(String args[]) {
		File newfile = new File(&quot;C:\\Test\\newtest.txt&quot;);
		try {
			if (newfile.createNewFile()) {
				System.out.println(&quot;ファイルの作成に成功しました&quot;);
			} else {
				System.out.println(&quot;ファイルの作成に失敗しました&quot;);
			}
		} catch (IOException e) {
			System.out.println(e);
		}
	}
}
```

#### **実行結果**
ファイルの作成に成功しました

&lt;br&gt;

## **5.ディレクトリを作成する**
ディレクトリを作成するには、Fileクラスのmkdirメソッドを使用します。

mkdirメソッドは、boolean型の値を返します。

```
public Boolean mkdir()
```

次に作成したFileクラスのオブジェクトに対して&quot;mkdir&quot;メソッドを実行します。
```
File newdir = new File(&quot;c:¥¥tmp¥¥sub&quot;);
newdir.mkdir();
```
これでディレクトリが作成されました。

#### **例**
[JSample17_5.java]

```
package JFile;

import java.io.File;

public class JSample17_5 {
	public static void main(String args[]) {
		File newfile = new File(&quot;C:\\Test\\Sub&quot;);
		if (newfile.mkdir()) {
			System.out.println(&quot;ディレクトリの作成に成功しました&quot;);
		} else {
			System.out.println(&quot;ディレクトリの作成に失敗しました&quot;);
		}
	}
}
```
#### **実行結果**
ディレクトリの作成に成功しました

&lt;br&gt;

## **6.ファイルの確認と削除**

#### **例**
[JSample17_6.java]

```
package JFile;

import java.io.File;

public class JSample17_6 {
	public static void main(String args[]) {
		File file = new File(&quot;C:\\Test\\test.txt&quot;);

		if (file.exists()) {
			if (file.delete()) {
				System.out.println(&quot;ファイルを削除しました&quot;);
			} else {
				System.out.println(&quot;ファイルの削除に失敗しました&quot;);
			}
		} else {
			System.out.println(&quot;ファイルが見つかりません&quot;);
		}
	}
}

```
#### **実行結果**
ファイルを削除しました

&lt;br&gt;

## **7.読み込みの許可と書き込みの許可**

**・canReadメソッド:**
該当のファイルが読めるかどうかの確認

```
public boolean canRead()
```

**・canWriteメソッド:**
書き込みが出来るかどうかの確認

```
public boolean canWrite()
```

**・setReadOnlyメソッド:**
書き込み不可(読み取り専用)にする
```
public boolean setReadOnly()
```

#### **例**
[JSample17_7.java]

```
package JFile;

import java.io.File;
import java.io.IOException;

public class JSample17_7 {
	public static void main(String args[]) {
		File file = new File(&quot;C:\\Test\\test.txt&quot;);
		// test.txtの作成
		if (file.exists()) {
		} else {
			try {
				file.createNewFile();
			} catch (IOException e) {
				// TODO 自動生成された catch ブロック
				e.printStackTrace();
			}
		}

		// test.txtファイルの読み込みと書き込みの可・否を確認
		canReadWrite(file);

		if (file.setReadOnly()) {
			System.out.println(&quot;ファイルを読み取り専用にしました&quot;);
		} else {
			System.out.println(&quot;読み取り専用に変更が失敗しました&quot;);
		}
	}

	private static void canReadWrite(File file) {
		if (file.canRead()) {
			System.out.println(&quot;ファイルは読み込み可能です&quot;);
		}

		if (file.canWrite()) {
			System.out.println(&quot;ファイルは書き込み可能です&quot;);
		}
	}
}

```
#### **実行結果**
ファイルは読み込み可能です&lt;br&gt;
ファイルは書き込み可能です&lt;br&gt;
ファイルを読み取り専用にしました

***

&gt; **練習**
&gt;&gt; **問題**[JEx17_1.java]

Javaの問題のフォルダに&quot;JEx17_1.java&quot;を作成ください。</textarea>
        <p id="output">content</p>
    </div>
    <div class="text-center">
        <a style="margin-top:2rem; margin-bottom:3rem; font-size:2rem; width:90px;" href="#" onClick="javascript:history.back(-1);" class="btn btn-raised btn-info animated fadeInUp animation-delay-10">戻る</a>
    </div>
    <script>
    showdown.setOption('omitExtraWLInCodeBlocks', 'true');
    showdown.setOption('ghCodeBlocks', 'true');
    var converter = new showdown.Converter({ extensions: ['prettify'] });
    html = converter.makeHtml(document.getElementById('text').value);
    document.getElementById('output').innerHTML = html;
    </script>
</body>



</html>