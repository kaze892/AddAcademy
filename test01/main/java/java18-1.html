<!DOCTYPE html>
<html>


<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#333">
    <title>第18章　テキストファイルの読み書き（前編）</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" href="../assets/css/style.light-blue-500.min.css">
    <link rel="shortcut icon" href="../assets/img/demo/home_icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../assets/css/preload.min.css">
    <link rel="stylesheet" href="../assets/css/plugins.min.css">
    <script src="../../cdn.jsdelivr.net/npm/showdown%401.9.0/dist/showdown.min.js"></script>
    <script src="../assets/js/showdown-prettify.min.js"></script>
    <script src="../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <style>
        li.L0, li.L1, li.L2, li.L3,
        li.L5, li.L6, li.L7, li.L8 {
          list-style-type: decimal !important;
        }
    </style>
</head>

<body style="font-size:1.5rem;">
    <script type="text/javascript" src="header.html"></script>
    <div class="ms-hero-page ms-hero-img-headbg ms-hero-bg-primary mb-6">
        <div class="container">
            <a style="position:absolute; top:0px; left:auto;" href="../main-index.html"><img style="height: 60px;"src="../assets/img/demo/home_icon.png" alt=""></a>
            <div class="text-center">
                <br>
                <br>
                <h1 class="no-m ms-site-title color-white center-block ms-site-title-lg mt-2 animated zoomInDown animation-delay-5" style="margin-top:2rem!important;">第18章　テキストファイルの読み書き（前編）</h1>
                <p class="lead lead-lg color-white text-center center-block mt-2 mb-4 mw-800 text-uppercase fw-300 animated fadeInUp animation-delay-7" style="margin-top:2rem!important; margin-bottom:4rem!important;">
                    テキストファイルの読み書きに関する基本的な考え方について説明します
                </p>
                <a style="margin-top:2rem; font-size:1.3rem;" href="../main-index.html" class="btn btn-raised btn-warning animated fadeInUp animation-delay-10">homepage</a>
                
            </div>
        </div>
    </div>
    <div style="margin: 0 auto; max-width: 1024px;">
        <textarea id="text" style="display:none"># **テキストファイルの入出力**

***

## **1.ファイルからテキストを読み込む**
ファイルからテキストを読み込むためには様々なクラスが用意されています。まずは基本となる&quot;FileReader&quot;クラスを使ってみます。

&lt;pre&gt;&lt;code&gt;File file = new File(file_name);
FileReader　filereader = new FileReader(file);
&lt;/code&gt;&lt;/pre&gt;

### **1-1.テキストを読む**
read&quot;メソッドでファイルから文字を1文字読み込みます。読み込んだ値はint型の値として取得できます。

```public int read() throws IOException```

&lt;br&gt;

```
try{
  File file = new File(&quot;C:¥¥Test¥¥test.txt&quot;);
  FileReader filereader = new FileReader(file);

  int ch = filereader.read();
  System.out.println((char)ch);
}catch(FileNotFoundException e){
  System.out.println(e);
}catch(IOException e){
  System.out.println(e);
}
```

&lt;br&gt;

### **1-2.ファイルの最後まで読み込む**
&quot;read&quot;メソッドを使うとまずファイルの先頭から1文字読み込みます。そして自動的に読み込む位置が次の文字に移ります。その為、連続して&quot;read&quot;メソッドを使うとファイルの先頭から順に1文字ずつ読み込んでくれます。そしてファイルの最後に達した時に&quot;-1&quot;という値を返してくれます。

```
try{
  File file = new File(&quot;c:¥¥tmp¥¥test.txt&quot;);
  FileReader filereader = new FileReader(file);

  int ch = filereader.read();
  while(ch != -1){
    System.out.print((char)ch);

    ch = filereader.read();
  }
}catch(FileNotFoundException e){
  System.out.println(e);
}catch(IOException e){
  System.out.println(e);
}
```
&lt;br&gt;

### **1-3.ファイルを閉じる**
ファイルに対する全ての処理が終わったら、ファイルを閉じます。&quot;close&quot;メソッドを使います。

```public void close() throws IOException```

&lt;br&gt;

#### **例**
[JSample18_1.java]
abc.txtファイル(内容&quot;abc&quot;)を事前に作成ください。

&lt;pre&gt;&lt;code&gt;package JFile;

import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class JSample18_1 {
	public static void main(String args[]) throws IOException {
		File file = new File(&quot;C:\\Test\\abc.txt&quot;);
		if (file.exists()) {
			canReadWrite(file);
			FileReader fr = new FileReader(file);
			int frs;
			while ((frs = fr.read()) != -1) {
				System.out.print((char) frs);
			}
			fr.close();
		}
	}

	private static void canReadWrite(File file) {
		if (file.canRead()) {
			System.out.println(&quot;ファイルは読み込み可能です&quot;);
		}
		if (file.canWrite()) {
			System.out.println(&quot;ファイルは書き込み可能です&quot;);
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;
#### **実行結果**
ファイルは読み込み可能です&lt;br&gt;
ファイルは書き込み可能です&lt;br&gt;
abc

&lt;br&gt;

## **2.読み込みの事前確認**

&quot;&lt;font size=4&gt;**exists**&lt;/font&gt;&quot;メソッドでファイルの存在を確認し、&quot;&lt;font size=4&gt;**isFile**&lt;/font&gt;&quot;メソッドで対象のFileクラスオブジェクトがファイルであるかどうかを確認後、&quot;&lt;font size=4&gt;**canRead**&lt;/font&gt;&quot;メソッドで読み込み可能かどうかを判別します。

#### **例**
[JSample18_2.java]

```
package JFile;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class JSample18_2 {

	public static void main(String args[]) {
		try {
			File file = new File(&quot;C:\\Test\\test.txt&quot;);

			if (fileFile(file)) {
				System.out.println(&quot;ファイルは存在し、読み込み可能です。&quot;);
				FileReader fr = new FileReader(file);
				int frs;
				while ((frs = fr.read()) != -1) {
					System.out.print((char) frs);
				}
				fr.close();
			}
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	private static boolean fileFile(File file) {
		if (file.exists()) {
			if (file.isFile() &amp;&amp; file.canRead()) {
				return true;
			}
		}
		return false;
	}
}
```
#### **実行結果**
ファイルは存在し、読み込み可能です。

&lt;br&gt;

## **3.ファイルからまとめてテキストを読む**

FileReaderクラスの持つ基本機能でファイルから読み込みは行うのですけど、それにBufferedReaderクラスをかぶせて使うことでまとめて読み込む機能を持てるようになります。

&lt;pre&gt;&lt;code&gt;File file = new File(file_name);
FileReader filereader = new FileReader(file);
BufferedReader br = new BufferedReader(filereader);
&lt;/code&gt;&lt;/pre&gt;

&lt;br&gt;

## **3-1.テキストを1行単位で読む**
次にファイルの読み込みの仕方です。FileReaerクラスの時と同じく&quot;read&quot;メソッドもありますが、1行まとめて読むための&quot;readLine&quot;メソッドが別に用意されています

```public String readLine() throws IOException```

&lt;br&gt;

テキストファイルから1行分のテキストをまとめて読み込みます。注意する点は、改行文字は読み込んだ文字に含まれない事です。よって1行ごとに、改行を含まないテキストを読み込んでString型の値として返してくれます。

このメソッドを使うとまずファイルの先頭の1行を読み込んでくれます。そして自動的に読み込む位置が次の行に移ります。その為、繰り返し&quot;readLine&quot;メソッドを実行することで、ファイルの先頭から最後まで順にテキストを読み込んでくれることになります。

```
try{
  File file = new File(&quot;c:¥¥tmp¥¥test.txt&quot;);
  BufferedReader br = new BufferedReader(new FileReader(file));

  String str = br.readLine();
  while(str != null){
    System.out.println(str);

    str = br.readLine();
  }

  br.close();
}catch(FileNotFoundException e){
  System.out.println(e);
}catch(IOException e){
  System.out.println(e);
}
```

&lt;br&gt;

### **3-2.ファイルを閉じる**

また、BufferedReaderクラスを使う場合にも、使い終わったら閉じておく必要があります。BufferedReaderクラスでもFileReaderクラスと同じように&quot;close&quot;メソッドを使います。

```public void close() throws IOException```

&lt;br&gt;

#### **例**
[JSample18_3.java]
abc123.txtファイル(内容:1行目&quot;abc&quot;、2行目&quot;123&quot;)を事前に作成ください。

&lt;pre&gt;&lt;code&gt;package JFile;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class JSample18_3 {

	public static void main(String args[]) {
		try {
			File file = new File(&quot;C:\\Test\\abc123.txt&quot;);
			if (fileFile(file)) {
				System.out.println(&quot;ファイルは存在し、読み込み可能です。&quot;);
				BufferedReader br = new BufferedReader(new FileReader(file));
				String fileLine = null;
				while ((fileLine = br.readLine()) != null) {
					System.out.println(fileLine);
				}
				br.close();
			} else {
				System.out.println(&quot;ファイルが見つからないか開けません&quot;);
			}
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	private static Boolean fileFile(File file) {
		if (file.exists()) {
			if (file.isFile() &amp;&amp; file.canRead()) {
				return true;
			}
		}
		return false;
	}
}
&lt;/code&gt;&lt;/pre&gt;
#### **実行結果**
ファイルは存在し、読み込み可能です。&lt;br&gt;
abc&lt;br&gt;
123

</textarea>
        <p id="output">content</p>
    </div>
    <div class="text-center">
        <a style="margin-top:2rem; margin-bottom:3rem; font-size:2rem; width:90px;" href="#" onClick="javascript:history.back(-1);" class="btn btn-raised btn-info animated fadeInUp animation-delay-10">戻る</a>
    </div>
    <script>
    showdown.setOption('omitExtraWLInCodeBlocks', 'true');
    showdown.setOption('ghCodeBlocks', 'true');
    var converter = new showdown.Converter({ extensions: ['prettify'] });
    html = converter.makeHtml(document.getElementById('text').value);
    document.getElementById('output').innerHTML = html;
    </script>
</body>


</html>